<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Dolphin - Machine Detail</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üê¨ Global Dolphin - Machine Detail</h1>
            <a href="/" class="back-link">‚Üê Back to Search</a>
        </header>

        <div id="machineHeader" class="machine-header">
            <!-- Machine header will be loaded here -->
        </div>

        <div class="tabs" role="tablist" aria-label="Machine detail sections">
            <button id="tab-machine" class="tab-button active" type="button" role="tab" aria-selected="true" aria-controls="tabContent" onclick="switchTab('machine')">Machine</button>
            <button id="tab-nc" class="tab-button" type="button" role="tab" aria-selected="false" aria-controls="tabContent" onclick="switchTab('nc')">NC</button>
            <button id="tab-contract" class="tab-button" type="button" role="tab" aria-selected="false" aria-controls="tabContent" onclick="switchTab('contract')">Contract</button>
            <button id="tab-sales" class="tab-button" type="button" role="tab" aria-selected="false" aria-controls="tabContent" onclick="switchTab('sales')">Sales</button>
            <button id="tab-dealer" class="tab-button" type="button" role="tab" aria-selected="false" aria-controls="tabContent" onclick="switchTab('dealer')">Dealer</button>
            <button id="tab-ship" class="tab-button" type="button" role="tab" aria-selected="false" aria-controls="tabContent" onclick="switchTab('ship')">Ship</button>
            <button id="tab-install" class="tab-button" type="button" role="tab" aria-selected="false" aria-controls="tabContent" onclick="switchTab('install')">Install</button>
            <button id="tab-enduser" class="tab-button" type="button" role="tab" aria-selected="false" aria-controls="tabContent" onclick="switchTab('enduser')">End User</button>
            <button id="tab-service" class="tab-button" type="button" role="tab" aria-selected="false" aria-controls="tabContent" onclick="switchTab('service')">Service Base</button>
        </div>

        <div id="tabContent" class="tab-content" role="tabpanel" aria-labelledby="tab-machine">
            <!-- Tab content will be loaded here -->
        </div>
    </div>

    <script src="/static/detail.js"></script>
    <script>
        // Load machine details on page load
        window.addEventListener('DOMContentLoaded', function() {
            const pathParts = window.location.pathname.split('/').filter(part => part !== '');
            const rawMachineId = pathParts[pathParts.length - 1];
            const machineIdNumber = Number.parseInt(rawMachineId, 10);
            if (Number.isInteger(machineIdNumber) && machineIdNumber > 0 && String(machineIdNumber) === rawMachineId) {
                loadMachineDetail(rawMachineId);
            } else {
                console.error('Invalid machine ID in URL path:', rawMachineId);
            }
        });
    </script>
</body>
</html>
